(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-248707d5"],{"0a49":function(e,t,a){var n=a("9b43"),i=a("626a"),r=a("4bf8"),l=a("9def"),s=a("cd1c");e.exports=function(e,t){var a=1==e,o=2==e,c=3==e,d=4==e,u=6==e,f=5==e||u,p=t||s;return function(t,s,v){for(var h,b,m=r(t),g=i(m),y=n(s,v,3),x=l(g.length),w=0,_=a?p(t,x):o?p(t,0):void 0;x>w;w++)if((f||w in g)&&(h=g[w],b=y(h,w,m),e))if(a)_[w]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:_.push(h)}else if(d)return!1;return u?-1:c||d?d:_}}},"20d6":function(e,t,a){"use strict";var n=a("5ca1"),i=a("0a49")(6),r="findIndex",l=!0;r in[]&&Array(1)[r](function(){l=!1}),n(n.P+n.F*l,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"34cd":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return r}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return s});var n=a("b775");function i(e){return Object(n["a"])({url:"/label/tree",method:"get",params:{needRoot:e}})}function r(e){return Object(n["a"])({url:"/label/add",method:"post",data:e})}function l(e,t){return Object(n["a"])({url:"/label/".concat(e),method:"put",data:t})}function s(e){return Object(n["a"])({url:"/label/".concat(e),method:"delete"})}},"54da":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("el-tree",{ref:"tree",staticClass:"custom-tree",attrs:{data:e.data,"node-key":"id","highlight-current":"",props:e.defaultProps,"default-expand-all":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.label))]),e._v(" "),a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(){return e.append(i)}}},[e._v("\n            添加\n          ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"root"!==n.label,expression:"node.label !== 'root'"}],attrs:{type:"text"},on:{click:function(){return e.remove(n,i)}}},[e._v("\n            删除\n          ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"root"!==n.label,expression:"node.label !== 'root'"}],attrs:{type:"text"},on:{click:function(){return e.rename(n,i)}}},[e._v("\n            重命名\n          ")])],1)])}}])}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"添加标签"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"60px","label-position":"left"}},[a("el-form-item",{attrs:{label:"标签名"}},[a("el-input",{attrs:{placeholder:"label"},model:{value:e.tagName,callback:function(t){e.tagName=t},expression:"tagName"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1)],1)],1)],1)},i=[],r=(a("20d6"),a("c5f6"),a("34cd")),l={data:function(){return{data:null,defaultProps:{children:"children",label:"label",id:-1},dialogVisible:!1,dialogType:"new",node:null,level:null,tagName:"",id:Number}},created:function(){this.getTree()},methods:{getTree:function(){var e=this;Object(r["b"])(!0).then(function(t){e.data=t.data.tree,e.id=t.data.maxId})},append:function(e){this.dialogVisible=!0,this.dialogType="new",this.level=e},remove:function(e,t){var a=this;Object(r["c"])(e.label).then(function(n){if(2e4!==n.code)a.$message({type:"error",message:n.message});else{a.$message({type:"success",message:"删除成功!"});var i=e.parent,r=i.data.children||i.data,l=r.findIndex(function(e){return e.id===t.id});r.splice(l,1),a.data=n.data.tree,a.id=n.data.maxId}})},rename:function(e,t){this.dialogVisible=!0,this.dialogType="edit",this.level=t,this.node=e,this.tagName=e.label},confirm:function(){var e=this,t="edit"===this.dialogType;if(t)this.level.label=this.tagName,Object(r["d"])(this.tagName,this.level).then(function(t){if(2e4!==t.code)e.$message({type:"error",message:t.message});else{e.$message({type:"success",message:"修改成功!"});var a=e.node.parent,n=a.data.children||a.data,i=n.findIndex(function(t){return t.id===e.level.id});n.splice(i,1,e.level),e.data=t.data.tree,e.id=t.data.maxId}});else{var a={id:++this.id,label:this.tagName,children:[],parentId:this.level.id};Object(r["a"])(a).then(function(t){2e4!==t.code?e.$message({type:"error",message:t.message}):(e.$message({type:"success",message:"添加成功!"}),e.level.children||e.$set(e.level,"children",[]),e.level.children.push(a),e.data=t.data.tree,e.id=t.data.maxId)})}this.dialogVisible=!1,this.tagName=""}}},s=l,o=(a("cf56"),a("2877")),c=Object(o["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},8977:function(e,t,a){},cd1c:function(e,t,a){var n=a("e853");e.exports=function(e,t){return new(n(e))(t)}},cf56:function(e,t,a){"use strict";var n=a("8977"),i=a.n(n);i.a},e853:function(e,t,a){var n=a("d3f4"),i=a("1169"),r=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}}}]);